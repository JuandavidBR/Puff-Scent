{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USUARIO/OneDrive/Escritorio/Puff-Scent/lib/cart-context.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { createContext, useContext, useState, useEffect, ReactNode } from 'react'\r\n\r\nexport interface CartItem {\r\n  id: string\r\n  name: string\r\n  price: number\r\n  quantity: number\r\n  image: string\r\n  type: 'perfume' | 'vape' | 'wax'\r\n}\r\n\r\ninterface CartContextType {\r\n  items: CartItem[]\r\n  addToCart: (item: Omit<CartItem, 'quantity'>) => void\r\n  removeFromCart: (id: string) => void\r\n  updateQuantity: (id: string, quantity: number) => void\r\n  clearCart: () => void\r\n  getTotalItems: () => number\r\n  getTotalPrice: () => number\r\n}\r\n\r\nconst CartContext = createContext<CartContextType | undefined>(undefined)\r\n\r\nexport function CartProvider({ children }: { children: ReactNode }) {\r\n  const [items, setItems] = useState<CartItem[]>([])\r\n  const [mounted, setMounted] = useState(false)\r\n\r\n  useEffect(() => {\r\n    setMounted(true)\r\n    const saved = localStorage.getItem('puffscent-cart')\r\n    if (saved) {\r\n      try {\r\n        setItems(JSON.parse(saved))\r\n      } catch (e) {\r\n        console.error('Error loading cart:', e)\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (mounted) {\r\n      localStorage.setItem('puffscent-cart', JSON.stringify(items))\r\n    }\r\n  }, [items, mounted])\r\n\r\n  const addToCart = (item: Omit<CartItem, 'quantity'>) => {\r\n    setItems(current => {\r\n      const existing = current.find(i => i.id === item.id)\r\n      if (existing) {\r\n        return current.map(i => \r\n          i.id === item.id ? { ...i, quantity: i.quantity + 1 } : i\r\n        )\r\n      }\r\n      return [...current, { ...item, quantity: 1 }]\r\n    })\r\n  }\r\n\r\n  const removeFromCart = (id: string) => {\r\n    setItems(current => current.filter(i => i.id !== id))\r\n  }\r\n\r\n  const updateQuantity = (id: string, quantity: number) => {\r\n    if (quantity <= 0) {\r\n      removeFromCart(id)\r\n      return\r\n    }\r\n    setItems(current => \r\n      current.map(i => i.id === id ? { ...i, quantity } : i)\r\n    )\r\n  }\r\n\r\n  const clearCart = () => {\r\n    setItems([])\r\n  }\r\n\r\n  const getTotalItems = () => items.reduce((sum, item) => sum + item.quantity, 0)\r\n  const getTotalPrice = () => items.reduce((sum, item) => sum + item.price * item.quantity, 0)\r\n\r\n  return (\r\n    <CartContext.Provider value={{\r\n      items,\r\n      addToCart,\r\n      removeFromCart,\r\n      updateQuantity,\r\n      clearCart,\r\n      getTotalItems,\r\n      getTotalPrice\r\n    }}>\r\n      {children}\r\n    </CartContext.Provider>\r\n  )\r\n}\r\n\r\nexport function useCart() {\r\n  const context = useContext(CartContext)\r\n  if (!context) {\r\n    throw new Error('useCart must be used within CartProvider')\r\n  }\r\n  return context\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;;;AAFA;;AAuBA,MAAM,4BAAc,IAAA,6SAAa,EAA8B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAA2B;;IAChE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,wSAAQ,EAAa,EAAE;IACjD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,wSAAQ,EAAC;IAEvC,IAAA,ySAAS;kCAAC;YACR,WAAW;YACX,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,IAAI,OAAO;gBACT,IAAI;oBACF,SAAS,KAAK,KAAK,CAAC;gBACtB,EAAE,OAAO,GAAG;oBACV,QAAQ,KAAK,CAAC,uBAAuB;gBACvC;YACF;QACF;iCAAG,EAAE;IAEL,IAAA,ySAAS;kCAAC;YACR,IAAI,SAAS;gBACX,aAAa,OAAO,CAAC,kBAAkB,KAAK,SAAS,CAAC;YACxD;QACF;iCAAG;QAAC;QAAO;KAAQ;IAEnB,MAAM,YAAY,CAAC;QACjB,SAAS,CAAA;YACP,MAAM,WAAW,QAAQ,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,KAAK,EAAE;YACnD,IAAI,UAAU;gBACZ,OAAO,QAAQ,GAAG,CAAC,CAAA,IACjB,EAAE,EAAE,KAAK,KAAK,EAAE,GAAG;wBAAE,GAAG,CAAC;wBAAE,UAAU,EAAE,QAAQ,GAAG;oBAAE,IAAI;YAE5D;YACA,OAAO;mBAAI;gBAAS;oBAAE,GAAG,IAAI;oBAAE,UAAU;gBAAE;aAAE;QAC/C;IACF;IAEA,MAAM,iBAAiB,CAAC;QACtB,SAAS,CAAA,UAAW,QAAQ,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IACnD;IAEA,MAAM,iBAAiB,CAAC,IAAY;QAClC,IAAI,YAAY,GAAG;YACjB,eAAe;YACf;QACF;QACA,SAAS,CAAA,UACP,QAAQ,GAAG,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,KAAK;oBAAE,GAAG,CAAC;oBAAE;gBAAS,IAAI;IAExD;IAEA,MAAM,YAAY;QAChB,SAAS,EAAE;IACb;IAEA,MAAM,gBAAgB,IAAM,MAAM,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,QAAQ,EAAE;IAC7E,MAAM,gBAAgB,IAAM,MAAM,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,KAAK,GAAG,KAAK,QAAQ,EAAE;IAE1F,qBACE,4TAAC,YAAY,QAAQ;QAAC,OAAO;YAC3B;YACA;YACA;YACA;YACA;YACA;YACA;QACF;kBACG;;;;;;AAGP;GApEgB;KAAA;AAsET,SAAS;;IACd,MAAM,UAAU,IAAA,0SAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANgB"}}]
}